
		<% include ../common/header.ejs %>
		
      
      <div class= "container">
        
          <form id = ticketForm>
            <div class="form-group">
            <label for="From">From</label>
              <select class="form-control" id="source">
                 <option value="Dhaka">Dhaka</option>
                  <option value="Chattogram">Chattogram</option>
                  <option value="Sylhet">Sylhet</option>
                  <option value="Jashore">Jashore</option>
                  <option value="Rajshahi">Rajshahi</option>
                  <option value="Rangamati">Rangamati</option>
                 
                  
                  <option value="Cox's Bazar">Cox's Bazar</option>
              </select>
      <br> 
              <label for="To">To</label>
                <select class="form-control" id="destination">
                    <option value="Dhaka">Dhaka</option>
                  <option value="Chattogram">Chattogram</option>
                  <option value="Sylhet">Sylhet</option>
                  <option value="Jashore">Jashore</option>
                  <option value="Rajshahi">Rajshahi</option>
                  <option value="Rangamati">Rangamati</option>
                  <option value="Cox's Bazar">Cox's Bazar</option>
                </select>
              </div>
              
             <!--datepicker-->
             
             <label for="example-date-input"> Date</label>
  <input class="form-control" type="date" value="2018-04-14" id="example-date-input">
  <br>
  
          
             
           <!--datepicker  -->
           
          <!-- Filter Button -->
          <br>
          
          <!-- <div class="container"> -->
            <div class="row">
              <div class="col-sm-3">
                <label>Filter</label>
                  <select class="form-control" id="filter">
                    <option value="nofilter" id="nofilter">NO FILTER SELECTED</option>
                    <option value="price" id="price">PRICE</option>
                    <option value="capacity" id="capacity">NO. OF SEATS</option>
                  </select>
              </div>
              
              <div class="col-sm-3">
                <label>Choose</label>
                <select class="form-control" id="operator">
                  <option value="equal" id="equal">Equal to =</option>
                  <option value="greater" id="greater">Greater Than ></option>
                  <option value="smaller" id="smaller">Smaller Than <</option>
                </select>
              </div>
              
              <div class="col-sm-6">
                <label>Enter Number</label>
                <input type="number" class="form-control" value="ticketPrice" id="ticketPrice" placeholder="ENTER VALUE">
              </div>
            </div>
           <!-- </div> -->
          <!-- Filter Button -->
            
          </br>
          <button type="button" class="btn btn-success" id="search">Search</button>
          </br> </br> </br> 
          <div id="list">
            
        </div>
          </form>
      
        
        
       
    </div>
        
 <% include ../common/footer.ejs %>

<script>
    $("#search").click(function(){
      if($('#filter').val() == $('#nofilter').val()){
   //var price = $('#price').val();
   //var capacity = $('#capacity').val();
   //var ticketPrice = $('#ticketPrice').val();
   
   //var ticketPrice = "{$lt: "+75+"}";
   var pickup= $('#source').val();
   var destination= $('#destination').val();
   var query = "pickup="+pickup+"&destination="+destination;
    $.get("/api/tickets?"+query, function(data, status){
      var html = new EJS({url: '/views/ticket/ticketList.ejs'}).render({tickets:data});
    $("#list").html(html);
    });
    
      }else if($('#filter').val() == $('#price').val() && $('#operator').val() == $('#smaller').val()){
        
        var price = $('#price').val();
        //var ticketPrice = $('#ticketPrice').val();
       
        var pickup= $('#source').val();
        var destination= $('#destination').val();
        var ticketPrice = $('#ticketPrice').val();
        var query = "pickup="+pickup+"&destination="+destination+"&ticketPrice="+ticketPrice;
          $.get("/api/filterList?"+query, function(data, status){
            var html = new EJS({url: '/views/ticket/ticketList.ejs'}).render({tickets:data});
          $("#list").html(html);
          });
          
          console.log('You have selected PRICE!');
          
      }else if($('#filter').val() == $('#price').val() && $('#operator').val() == $('#greater').val()){
        
        var price = $('#price').val();
        //var ticketPrice = $('#ticketPrice').val();
       
        var pickup= $('#source').val();
        var destination= $('#destination').val();
        var ticketPrice = $('#ticketPrice').val();
        var query = "pickup="+pickup+"&destination="+destination+"&ticketPrice="+ticketPrice;
          $.get("/api/filterLista?"+query, function(data, status){
            var html = new EJS({url: '/views/ticket/ticketList.ejs'}).render({tickets:data});
          $("#list").html(html);
          });
          
          console.log('You have selected PRICE!');
        
      
      }else if($('#filter').val() == $('#price').val() && $('#operator').val() == $('#equal').val()){
        
        var price = $('#price').val();
        //var ticketPrice = $('#ticketPrice').val();
       
        var pickup= $('#source').val();
        var destination= $('#destination').val();
        var ticketPrice = $('#ticketPrice').val();
        var query = "pickup="+pickup+"&destination="+destination+"&ticketPrice="+ticketPrice;
          $.get("/api/filterListb?"+query, function(data, status){
            var html = new EJS({url: '/views/ticket/ticketList.ejs'}).render({tickets:data});
          $("#list").html(html);
          });
          
          console.log('You have selected PRICE!');
        
      
      }else if($('#filter').val() == $('#capacity').val() &&  $('#operator').val() == $('#smaller').val()){
        
        var price = $('#price').val();
        //var ticketPrice = $('#ticketPrice').val();
       
        var pickup= $('#source').val();
        var destination= $('#destination').val();
        var ticketPrice = $('#ticketPrice').val();
        var query = "pickup="+pickup+"&destination="+destination+"&capacity="+ticketPrice;
          $.get("/api/busList?"+query, function(data, status){
            var html = new EJS({url: '/views/ticket/ticketList.ejs'}).render({tickets:data});
          $("#list").html(html);
          });
        
        console.log('You have selected No. of SEATS!');
        
        
      }else{
        console.log('SELECT NO FILTER TO SEE FULL LIST!');
      }
    
    //var query1 = "price="+price+""
    
    });
  


  
  </script>


<script src="/vendor/ejs_production.js"></script>

 

	</body>
</html>